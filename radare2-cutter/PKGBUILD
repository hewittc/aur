pkgname=radare2-cutter
pkgver=1.4
pkgrel=1
pkgdesc="A Qt and C++ GUI for radare2 reverse engineering framework"
arch=('i686' 'x86_64')
url="https://github.com/radareorg/cutter"
license=('GPL3' 'LGPL3')
makedepends=('cmake')
depends=('qt5-base' 'qt5-svg' 'qt5-webengine')
conflicts=('radare2-cutter-git')

source=(
  "https://github.com/radareorg/cutter/archive/v${pkgver}.tar.gz"
  "000-qt5-target-link-libraries.patch"
)
sha256sums=(
  'f2fff960ea102fc8cf7d62fe25ee2c992b2e19857a4f6a2e308b3c9cba93e5b8'
  'e568803dcf5d6ac3f862f7a7417e93fe8b14a4dfa96cb7e981a4e99491a009c2'
)

prepare() {
	cd "$srcdir/cutter-$pkgver/src/"
	patch -p0 < ../../000-qt5-target-link-libraries.patch
}

build() {
        mkdir -p "$srcdir/cutter-$pkgver/src/build"
	cd "$srcdir/cutter-$pkgver/src/build"
	cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release ..
	make
}

package() {
	cd "$srcdir/cutter-$pkgver/src/build"
	mkdir -p "$pkgdir/usr/bin/"
	install -D -m755 Cutter "$pkgdir/usr/bin/cutter"
}

